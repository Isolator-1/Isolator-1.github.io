---
title: qemuçš„å®‰è£…ä¸ä»¿çœŸç¬¬ä¸€ä¸ªmipsç¨‹åº
tags: [firmware analysis]
date: 2022-12-23 15:33:00
categories: [å›ºä»¶ä»¿çœŸ]
excerpt: qemuçš„user-modeä½¿ç”¨æ–¹æ³•
---

#### QEMUå®‰è£…

QEMUä»¿çœŸç¨‹åºåˆ†ä¸ºä¸¤ç±»ï¼šä½¿ç”¨è€…æ¨¡å¼ï¼ˆUser Modeï¼‰ã€ç³»ç»Ÿæ¨¡å¼ï¼ˆSystem Modeï¼‰ã€‚åŒºåˆ«åœ¨äºUser Modeåªä»¿çœŸå•ä¸ªç¨‹åºï¼Œè€ŒSystem Modeä»¿çœŸæ•´ä¸ªè®¡ç®—æœºç³»ç»Ÿï¼Œç±»ä¼¼vmware

##### ä½¿ç”¨è€…æ¨¡å¼

å®‰è£…ï¼š`sudo apt-get install qemu-user[-static]`

ä½¿ç”¨ï¼ˆä»¥mipsä¸ºä¾‹ï¼‰ï¼š


```shell
cd <path-to-fsroot>
cp $(which qemu-mipsel-static) ./
sudo chroot . ./qemu-mipsel-static <path-to-elf>
```

å¯¹äº32ä½å°ç«¯åºï¼ˆLSBï¼‰ç¨‹åºï¼Œä½¿ç”¨`qemu-mipsel`æ¥ä»¿çœŸï¼Œ32ä½MSBç¨‹åºï¼Œä½¿ç”¨`qemu-mips`æ¥ä»¿çœŸ

ä¸€ä¸ªå°ç«¯åºçš„ä»¿çœŸç¤ºä¾‹ï¼š

![](/img/å›ºä»¶ä»¿çœŸ/qemu/1.jpg)

> Q1ï¼šä¸ºä»€ä¹ˆè¦åŠ  -static ï¼Ÿ
>
> A1ï¼šxxx-staticè¡¨ç¤ºä½¿ç”¨é™æ€é“¾æ¥çš„qemuç¨‹åºï¼Œä¸ä¾èµ–å¤–éƒ¨åŠ¨æ€é“¾æ¥ç¨‹åºï¼Œç”±äºä½¿ç”¨æ˜¯è¦chrootæ”¹å˜æ ¹ç›®å½•ï¼ŒåŸæœ¬çš„åŠ¨æ€é“¾æ¥åº“ä¼šæ— æ³•æ‰¾åˆ°ï¼Œé™¤éä½¿ç”¨lddå‘½ä»¤æŠŠæ‰€æœ‰ä¾èµ–å…¨éƒ½å¤åˆ¶åˆ°æ–°çš„æ ¹ç›®å½•ä¸‹ï¼Œå¦åˆ™æ— æ³•è¿è¡Œã€‚
>
> è€Œä¸”çœŸçš„å¤åˆ¶åŠ¨æ€é“¾æ¥åº“è¿‡æ¥å¯èƒ½ä¼šå’ŒåŸæœ¬å­˜åœ¨çš„æ–‡ä»¶é‡åï¼ˆæˆ‘çŒœçš„ï¼Œæ²¡éªŒè¯è¿‡ğŸ˜…ï¼‰

##### ç³»ç»Ÿæ¨¡å¼

ä¸ç®¡äº†ï¼Œç›´æ¥ç”¨fapæˆ–è€…firmae